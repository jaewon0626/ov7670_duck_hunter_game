# ov7670_duck_hunter_game
## OV7670 카메라를 이용한 VGA 덕헌트(Duck Hunt) 게임 프로젝트
<br>

## 프로젝트 개요 (Project Overview)
### 목표: 추억의 게임 'Duck Hunt'를 FPGA 하드웨어로 재구현. 단순한 버튼 조작이 아닌, OV7670 카메라 센서를 활용해 화면의 오리를 직접 조준하는 게임 구현
### 개발 환경 : 
- H/W: Basys3 (Artix-7 FPGA), OV7670 카메라 센서 
- Tool : Vivado
- Language : SystemVerilog

## 주요 구현 내용 (Implementation Details)
### 시스템 전체 구조 (DuckHunt_System.sv)
/게임의 최상위 모듈로, 카메라 입력, 게임 로직, VGA 출력, 버튼 입력을 통합 관리
/상태 머신 (FSM): S_WAIT (대기), S_PLAY (게임 중), S_PAUSE (일시정지), S_SHOOT (발사), S_GAMEOVER (종료) 상태로 게임의 흐름을 제어

#### 카메라 및 영상 처리 (OV7670_..., Red_Detector_...)
- 영상 입력: SCCB 프로토콜을 통해 OV7670 카메라를 설정하고, RGB565 포맷의 영상 데이터를 수신
- 조준 인식 (Red Detection): Red_Detector_Threshold.sv 모듈에서 카메라 중앙 영역(Crosshair)에 들어온 픽셀의 RGB 값을 분석함. 빨간색 성분이 임계값(MIN_RED_PIXELS) 이상일 경우 '조준됨'으로 판정하여 사격 성공 여부를 결정

#### 게임 로직 (Duck_Controller.sv)

오리 생성 및 이동: 난수(RANDOM_SEED)를 기반으로 오리의 생성 위치, 이동 방향, 속도, 종류를 무작위로 결정합니다.


상호작용:


피격 판정: 카메라가 빨간색을 감지하고 발사 버튼을 눌렀을 때, 오리가 조준 범위 내에 있으면 S_BOOM 상태로 전환되어 폭발 애니메이션을 재생합니다.



총알 시스템: 최대 50발의 총알 제한이 있으며, 발사 시 차감되고 0이 되면 게임 오버가 되는 기능을 추가로 구현했습니다.


D. 디스플레이 컨트롤러 (Game_Display_Controller.sv)

레이어 합성: 배경 이미지(ROM), 카메라 영상(크로스헤어 영역), 오리 스프라이트, 텍스트 UI를 우선순위에 따라 겹쳐서 VGA로 출력합니다.


Night Mode: 게임 시간이 30초 미만으로 남으면 배경을 어둡게 처리(invert_bg)하여 긴장감을 조성하는 시각적 효과를 구현했습니다.


UI 표시: Text_Screen_Gen 모듈을 통해 점수, 남은 시간, 남은 총알 수 등을 화면에 텍스트와 아이콘으로 표시합니다.

3. 프로젝트의 핵심 강조 사항 (Highlights)
하드웨어 기반 영상 처리: 소프트웨어의 도움 없이 Verilog 하드웨어 로직만으로 카메라 설정(SCCB), 영상 데이터 갈무리, 실시간 색상 검출을 구현했습니다.


메모리 최적화 (QQQVGA 스케일링): FPGA 내부 메모리(BRAM) 용량 한계를 극복하기 위해, 카메라 입력 해상도를 QQVGA(160x120)에서 **QQQVGA(80x60)**로 다운스케일링하여 프레임 버퍼 용량을 획기적으로 줄였습니다.



인터랙티브 게임 요소: 단순 키보드/마우스 입력이 아닌, 카메라가 인식하는 색상(빨간색 물체)을 트리거로 사용하는 독창적인 입력 방식을 적용했습니다.

4. 트러블슈팅 (Troubleshooting)
프로젝트 진행 중 발생한 주요 문제점과 해결 과정은 다음과 같습니다.
